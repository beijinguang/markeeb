<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="markee" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="码客Mark">
<meta property="og:url" content="http://code.idea4j.com/page/3/index.html">
<meta property="og:site_name" content="码客Mark">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="码客Mark">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="码客Mark" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>码客Mark</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>





    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?c160bf5d12f84389ce96c02b54e4575f";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/head.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">markee</a></h1>
        </hgroup>

        
        <p class="header-subtitle">预测未来最好的方法是在现在创造未来</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:wangjinguang66@163.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/beijinguang" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Appollo/">Appollo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI/">CI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GC/">GC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GoF/">GoF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java字节码/">Java字节码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lua/">Lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYSQL/">MYSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/">Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NBA/">NBA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Netty/">Netty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pinpoint/">Pinpoint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPC/">RPC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/">RabbitMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stored-Procedure/">Stored Procedure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Transaction/">Transaction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angularjs2/">angularjs2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dubbo/">dubbo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iframe/">iframe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java泛型/">java泛型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jps/">jps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maxwell/">maxwell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/">servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-batch/">spring batch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/starUML/">starUML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime-text/">sublime text</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xpath/">xpath</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其他/">其他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/如何替换-JDK-的类/">如何替换 JDK 的类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字节码/">字节码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习/">学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小程序/">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作/">工作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/异常/">异常</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信小程序/">微信小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能调优/">性能调优</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汇编语言/">汇编语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/消息队列/">消息队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深克隆/">深克隆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游戏/">游戏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/知识/">知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/社会/">社会</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/神舟飞船/">神舟飞船</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/类装载/">类装载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统性能/">系统性能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/索引/">索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/缓存/">缓存</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编译原理/">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网关/">网关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/里约/">里约</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/链路追踪/">链路追踪</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/问题/">问题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试题/">面试题</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">笨鸟也飞</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">markee</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/head.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">markee</a></h1>
            </hgroup>
            
            <p class="header-subtitle">预测未来最好的方法是在现在创造未来</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:wangjinguang66@163.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/beijinguang" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-docker 命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/29/docker 命令/" class="article-date">
      <time datetime="2020-05-29T11:10:32.000Z" itemprop="datePublished">2020-05-29</time>
</a>

 
    <a href="/2020/05/29/docker 命令/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/29/docker 命令/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/29/docker 命令/">docker 命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="docker-命令"><a href="#docker-命令" class="headerlink" title="docker 命令"></a>docker 命令</h2><p>docker search</p>
<h3 id="docker-pull-tomcat"><a href="#docker-pull-tomcat" class="headerlink" title="docker pull tomcat"></a>docker pull tomcat</h3><p>命令格式：<code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></p>
<h3 id="docker-run-–name-mytomcat-d-tomcat-latest"><a href="#docker-run-–name-mytomcat-d-tomcat-latest" class="headerlink" title="docker run  –name  mytomcat -d tomcat:latest"></a>docker run  –name  mytomcat -d tomcat:latest</h3><h3 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h3><p>docker stop</p>
<p>docker ps a</p>
<p>docker start</p>
<p>docker rm</p>
<p>docker run -d -p 8888:8080 tomcat</p>
<p>docker images [name]</p>
<p>docker build -f /usr/local/dockerfile -t [name] path</p>
<p>docker build -t saleorder:1.0 . </p>
<p>docker exec </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/docker/">docker</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-docker 容器数据卷" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/29/docker 容器数据卷/" class="article-date">
      <time datetime="2020-05-29T11:10:32.000Z" itemprop="datePublished">2020-05-29</time>
</a>

 
    <a href="/2020/05/29/docker 容器数据卷/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/29/docker 容器数据卷/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/29/docker 容器数据卷/">docker 容器数据卷</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="docker-容器数据卷"><a href="#docker-容器数据卷" class="headerlink" title="docker 容器数据卷"></a>docker 容器数据卷</h2><p>docker run -it  -v 宿主机目录:/容器目录 镜像名</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/docker/">docker</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Dockerfile指令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/Dockerfile指令/" class="article-date">
      <time datetime="2020-05-28T15:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/Dockerfile指令/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/Dockerfile指令/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/Dockerfile指令/">docker 容器数据卷</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Dockerfile指令"><a href="#Dockerfile指令" class="headerlink" title="Dockerfile指令"></a>Dockerfile指令</h2><h4 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a>FROM</h4><p>  基础镜像，当前镜像是基于哪个镜像的</p>
<h4 id="MAINTAINER"><a href="#MAINTAINER" class="headerlink" title="MAINTAINER"></a>MAINTAINER</h4><p>  镜像维护者的姓名和邮箱地址等</p>
<h4 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a>WORKDIR</h4><p>  指定创建容器后，终端默认位置（pwd的位置）</p>
<h4 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h4><p>  构建镜像过程中的环境变量</p>
<h5 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h5><p>  构建容器过程中的执行的命令</p>
<h4 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h4><p>  当前容器对外暴露出的端口</p>
<h4 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h4><p>  容器数据卷，用于数据保存和持久化</p>
<h4 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h4><p>  将宿主机目录下的文件拷贝到镜像中，且会解压 tar包和自动处理URL</p>
<h4 id="COPY"><a href="#COPY" class="headerlink" title="COPY"></a>COPY</h4><h4 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h4><p>指定容器启动时要执行的命令</p>
<h4 id="ENTRYPOINT"><a href="#ENTRYPOINT" class="headerlink" title="ENTRYPOINT"></a>ENTRYPOINT</h4><h4 id="ONBUILD"><a href="#ONBUILD" class="headerlink" title="ONBUILD"></a>ONBUILD</h4>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/docker/">docker</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Java性能调优工具" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/Java性能调优工具/" class="article-date">
      <time datetime="2020-05-28T12:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/Java性能调优工具/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/Java性能调优工具/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/Java性能调优工具/">Java性能调优工具</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Java性能调优工具"><a href="#Java性能调优工具" class="headerlink" title="Java性能调优工具"></a>Java性能调优工具</h1><h2 id="Linux命令行工具"><a href="#Linux命令行工具" class="headerlink" title="Linux命令行工具"></a>Linux命令行工具</h2><h3 id="top命令"><a href="#top命令" class="headerlink" title="top命令"></a>top命令</h3><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">top [-] [d delay] [q] [c] [S] [s] [i] [n] [b]</div></pre></td></tr></table></figure>
<p><img src="https://gitee.com/idea4j/imagerep/raw/master/images/image-20200901095826286.png" alt="image-20200901095826286"></p>
<p>两大区域<strong>统计信息区</strong>和<strong>进程信息区</strong></p>
<h4 id="统计信息区"><a href="#统计信息区" class="headerlink" title="统计信息区"></a>统计信息区</h4><ul>
<li><p>第一行：任务队列信息，与<code>uptime</code>命令执行结果相同。</p>
<ul>
<li>09:58:07：系统当前时间</li>
<li>up 195 days, 23:28：主机已运行时间</li>
<li>5 users：用户连接数（不是用户数，who命令）</li>
<li>load average: 0.03, 0.09, 0.12：系统平均负载，统计最近1,5,15分钟的系统平均负载</li>
</ul>
<p><strong>补充</strong>：<code>uptime -V</code>可查询版本</p>
</li>
<li><p>第二行：进程信息</p>
<ul>
<li>Tasks: 128 total：进程总数</li>
<li>1 running：正在运行的进程数</li>
<li>127 sleeping：睡眠的进程数</li>
<li>0 stopped：停止的进程数</li>
<li>0 zombie：僵尸进程数</li>
</ul>
</li>
<li><p>第三行：CPU信息（当有多个CPU时，这些内容可能会超过两行）</p>
<ul>
<li>2.8us：用户空间所占CPU百分比</li>
<li>1.0sy：内核空间占用CPU百分比</li>
<li>0.0 ni：用户进程空间内改变过优先级的进程占用CPU百分比</li>
<li>96.3id：空闲CPU百分比</li>
<li>0.0 wa：等待输入输出的CPU时间百分比</li>
<li>0.0 hi：硬件CPU中断占用百分比</li>
<li>0.0 si：软中断占用百分比</li>
<li>0.0 st：虚拟机占用百分比</li>
</ul>
</li>
<li><p>第四行：内存信息（与第五行的信息类似与free命令）</p>
<ul>
<li>8010424 total：物理内存总量</li>
<li>6038816 used：已使用的内存总量</li>
<li>274220 free：空闲的内存总量（free+used=total）</li>
<li>1723692 buffers：用作内核缓存的内存量</li>
</ul>
</li>
<li><p>第五行：swap信息</p>
<ul>
<li>0total：交换分区总量</li>
<li>0used：已使用的交换分区总量</li>
<li>0free：空闲交换区总量</li>
<li>1663496cached Mem：缓冲的交换区总量，内存中的内容被换出到交换区，然后又被换入到内存，但是使用过的交换区没有被覆盖，交换区的这些内容已存在于内存中的交换区的大小，相应的内存再次被换出时可不必再对交换区写入。</li>
</ul>
</li>
</ul>
<h4 id="进程信息区"><a href="#进程信息区" class="headerlink" title="进程信息区"></a>进程信息区</h4><ul>
<li>PID:进程id</li>
<li>PPID:父进程id</li>
<li>RUSER:Real user name（看了好多，都是这样写，也不知道和user有什么区别，欢迎补充此处）</li>
<li>UID:进程所有者的id</li>
<li>USER:进程所有者的用户名</li>
<li>GROUP:进程所有者的组名</li>
<li>TTY:启动进程的终端名。不是从终端启动的进程则显示为?</li>
<li>PR:优先级</li>
<li>NI:nice值。负值表示高优先级，正值表示低优先级</li>
<li>P:最后使用的CPU，仅在多CPU环境下有意义</li>
<li>%CPU:上次更新到现在的CPU时间占用百分比</li>
<li>TIME:进程使用的CPU时间总计，单位秒</li>
<li>TIME+：进程所使用的CPU时间总计，单位1/100秒</li>
<li>%MEM:进程使用的物理内存百分比</li>
<li>VIRT:进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES</li>
<li>SWAP:进程使用的虚拟内存中被被换出的大小</li>
<li>RES:进程使用的、未被换出的物理内存的大小</li>
<li>CODE:可执行代码占用的物理内存大小</li>
<li>DATA:可执行代码以外的部分（数据段+栈）占用的物理内存大小</li>
<li>SHR:共享内存大小</li>
<li>nFLT:页面错误次数</li>
<li>nDRT:最后一次写入到现在，被修改过的页面数</li>
<li>S:进程状态（D=不可中断的睡眠状态，R=运行，S=睡眠，T=跟踪/停止，Z=僵尸进程）</li>
<li>COMMAND:命令名/行</li>
<li>WCHAN:若该进程在睡眠，则显示睡眠中的系统函数名</li>
<li>Flags:任务标志</li>
</ul>
<h3 id="top命令的使用"><a href="#top命令的使用" class="headerlink" title="top命令的使用"></a>top命令的使用</h3><h4 id="top使用格式"><a href="#top使用格式" class="headerlink" title="top使用格式"></a>top使用格式</h4><p>top [-] [d] [p] [q] [c] [C] [S] [s] [n]</p>
<h4 id="top参数说明"><a href="#top参数说明" class="headerlink" title="top参数说明"></a>top参数说明</h4><ul>
<li>d: 指定每两次屏幕信息刷新之间的时间间隔。当然用户可以使用s交互命令来改变之。</li>
<li>p: 通过指定监控进程ID来仅仅监控某个进程的状态。</li>
<li>q: 该选项将使top没有任何延迟的进行刷新。如果调用程序有超级用户权限，那么top将以尽可能高的优先级运行。</li>
<li>S: 指定累计模式</li>
<li>s: 使top命令在安全模式中运行。这将去除交互命令所带来的潜在危险。</li>
<li>i: 使top不显示任何闲置或者僵死进程。</li>
<li>c: 显示整个命令行而不只是显示命令名</li>
</ul>
<h4 id="交互命令"><a href="#交互命令" class="headerlink" title="交互命令"></a>交互命令</h4><ul>
<li>Ctrl+L: 擦除并且重写屏幕。</li>
<li>h或者?: 显示帮助画面，给出一些简短的命令总结说明。</li>
<li>k: 终止一个进程。系统将提示用户输入需要终止的进程PID，以及需要发送给该进程什么样的信号。一般的终止进程可以使用15信号;如果不能正常结束那就使用信号9强制结束该进程。默认值是信号15。在安全模式中此命令被屏蔽。</li>
<li>i: 忽略闲置和僵死进程。这是一个开关式命令。</li>
<li>q: 退出程序。</li>
<li>r: 重新安排一个进程的优先级别。系统提示用户输入需要改变的进程PID以及需要设置的进程优先级值。输入一个正值将使优先级降低，反之则可以使该进程拥有更高的优先权。默认值是10。</li>
<li>S: 切换到累计模式。</li>
<li>s: 改变两次刷新之间的延迟时间。系统将提示用户输入新的时间，单位为s。如果有小数，就换算成m s。输入0值则系统将不断刷新，默认值是5 s。需要注意的是如果设置太小的时间，很可能会引起不断刷新，从而根本来不及看清显示的情况，而且系统负载也会大大增加。</li>
<li>f或者F: 从当前显示中添加或者删除项目。</li>
<li>o或者O: 改变显示项目的顺序。</li>
<li>l: 切换显示平均负载和启动时间信息。</li>
<li>m: 切换显示内存信息。</li>
<li>t: 切换显示进程和CPU状态信息。</li>
<li>c: 切换显示命令名称和完整命令行。</li>
<li>M: 根据驻留内存大小进行排序。</li>
<li>P: 根据CPU使用百分比大小进行排序。</li>
<li>T: 根据时间/累计时间进行排序。</li>
<li>W: 将当前设置写入~/.toprc文件中。这是写top配置文件的推荐方法。</li>
</ul>
<h3 id="sar命令"><a href="#sar命令" class="headerlink" title="sar命令"></a>sar命令</h3><h3 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h3><h3 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h3><h3 id="pidstat"><a href="#pidstat" class="headerlink" title="pidstat"></a>pidstat</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/性能调优/">性能调优</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/性能调优/">性能调优</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Java字节码指令收集大全" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/Java字节码指令收集大全/" class="article-date">
      <time datetime="2020-05-28T12:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/Java字节码指令收集大全/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/Java字节码指令收集大全/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/Java字节码指令收集大全/">Java字节码指令收集大全</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Java字节码指令收集大全"><a href="#Java字节码指令收集大全" class="headerlink" title="Java字节码指令收集大全"></a>Java字节码指令收集大全</h2><h3 id="常量入栈指令"><a href="#常量入栈指令" class="headerlink" title="常量入栈指令"></a>常量入栈指令</h3><table>
<thead>
<tr>
<th style="text-align:left"><strong>指令码</strong></th>
<th style="text-align:left"><strong>操作码（助记符）</strong></th>
<th style="text-align:left"><strong>操作数</strong></th>
<th style="text-align:left"><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">0x01</td>
<td style="text-align:left">aconst_null</td>
<td style="text-align:left"></td>
<td style="text-align:left">null值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x02</td>
<td style="text-align:left">iconst_m1</td>
<td style="text-align:left"></td>
<td style="text-align:left">-1（int）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x03</td>
<td style="text-align:left">iconst_0</td>
<td style="text-align:left"></td>
<td style="text-align:left">0（int）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x04</td>
<td style="text-align:left">iconst_1</td>
<td style="text-align:left"></td>
<td style="text-align:left">1（int）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x05</td>
<td style="text-align:left">iconst_2</td>
<td style="text-align:left"></td>
<td style="text-align:left">2（int）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x06</td>
<td style="text-align:left">iconst_3</td>
<td style="text-align:left"></td>
<td style="text-align:left">3（int）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x07</td>
<td style="text-align:left">iconst_4</td>
<td style="text-align:left"></td>
<td style="text-align:left">4（int）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x08</td>
<td style="text-align:left">iconst_5</td>
<td style="text-align:left"></td>
<td style="text-align:left">5（int）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x09</td>
<td style="text-align:left">lconst_0</td>
<td style="text-align:left"></td>
<td style="text-align:left">0（long）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x0a</td>
<td style="text-align:left">lconst_1</td>
<td style="text-align:left"></td>
<td style="text-align:left">1（long）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x0b</td>
<td style="text-align:left">fconst_0</td>
<td style="text-align:left"></td>
<td style="text-align:left">0（float）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x0c</td>
<td style="text-align:left">fconst_1</td>
<td style="text-align:left"></td>
<td style="text-align:left">1（float）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x0d</td>
<td style="text-align:left">fconst_2</td>
<td style="text-align:left"></td>
<td style="text-align:left">2（float）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x0e</td>
<td style="text-align:left">dconst_0</td>
<td style="text-align:left"></td>
<td style="text-align:left">0（double）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x0f</td>
<td style="text-align:left">dconst_1</td>
<td style="text-align:left"></td>
<td style="text-align:left">1（double）值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x10</td>
<td style="text-align:left">bipush</td>
<td style="text-align:left">valuebyte</td>
<td style="text-align:left">valuebyte值带符号扩展成int值入栈</td>
</tr>
<tr>
<td style="text-align:left">0x11</td>
<td style="text-align:left">sipush</td>
<td style="text-align:left">valuebyte1  valuebyte2</td>
<td style="text-align:left">(valuebyte1 &lt;&lt; 8)\</td>
<td>valuebyte2 值带符号扩展成int值入栈。</td>
</tr>
<tr>
<td style="text-align:left">0x12</td>
<td style="text-align:left">ldc</td>
<td style="text-align:left">indexbyte1</td>
<td style="text-align:left">常量池中的常量值<br>（int, float, string reference, object reference）入栈。</td>
</tr>
<tr>
<td style="text-align:left">0x13</td>
<td style="text-align:left">ldc_w</td>
<td style="text-align:left">indexbyte1 indexbyte2</td>
<td style="text-align:left">常量池中常量<br>（int, float, string reference, object reference）入栈。</td>
</tr>
<tr>
<td style="text-align:left">0x14</td>
<td style="text-align:left">ldc2_2</td>
<td style="text-align:left">indexbyte1 indexbyte2</td>
<td style="text-align:left">常量池中常量（long, double）入栈。</td>
</tr>
</tbody>
</table>
<h3 id="局部变量值转载到栈中指令"><a href="#局部变量值转载到栈中指令" class="headerlink" title="局部变量值转载到栈中指令"></a>局部变量值转载到栈中指令</h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x19</td>
<td>(wide)aload</td>
<td>indexbyte</td>
<td>从局部变量indexbyte中装载引用类型值入栈</td>
</tr>
<tr>
<td>0x2a</td>
<td>aload_0</td>
<td></td>
<td>从局部变量0中装载引用类型值入栈</td>
</tr>
<tr>
<td>0x2b</td>
<td>aload_1</td>
<td></td>
<td>从局部变量1中装载引用类型值入栈</td>
</tr>
<tr>
<td>0x2c</td>
<td>aload_2</td>
<td></td>
<td>从局部变量2中装载引用类型值入栈</td>
</tr>
<tr>
<td>0a2d</td>
<td>aload_3</td>
<td></td>
<td>从局部变量3中装载引用类型值入栈</td>
</tr>
<tr>
<td>0x15</td>
<td>(wide)iload</td>
<td>indexbyte</td>
<td>从局部变量indexbyte中装载int类型值入栈</td>
</tr>
<tr>
<td>0x1a</td>
<td>iload_0</td>
<td></td>
<td>从局部变量0中装载int类型值入栈</td>
</tr>
<tr>
<td>0x1b</td>
<td>iload_1</td>
<td></td>
<td>从局部变量1中装载int类型值入栈</td>
</tr>
<tr>
<td>0x1c</td>
<td>iload_2</td>
<td></td>
<td>从局部变量2中装载int类型值入栈</td>
</tr>
<tr>
<td>0x1d</td>
<td>iload_3</td>
<td></td>
<td>从局部变量3中装载int类型值入栈</td>
</tr>
<tr>
<td>0x16</td>
<td>(wide)lload</td>
<td>indexbyte</td>
<td>从局部变量indexbyte中装载long类型值入栈</td>
</tr>
<tr>
<td>0x1e</td>
<td>lload_0</td>
<td></td>
<td>从局部变量0中装载long类型值入栈</td>
</tr>
<tr>
<td>0x1f</td>
<td>lload_1</td>
<td></td>
<td>从局部变量1中装载long类型值入栈</td>
</tr>
<tr>
<td>0x20</td>
<td>lload_2</td>
<td></td>
<td>从局部变量2中装载long类型值入栈</td>
</tr>
<tr>
<td>0x21</td>
<td>lload_3</td>
<td></td>
<td>从局部变量3中装载long类型值入栈</td>
</tr>
<tr>
<td>0x17</td>
<td>f(wide)load</td>
<td>indexbyte</td>
<td>从局部变量indexbyte中装载float类型值入栈</td>
</tr>
<tr>
<td>0x22</td>
<td>fload_0</td>
<td></td>
<td>从局部变量0中装载float类型值入栈</td>
</tr>
<tr>
<td>0x23</td>
<td>fload_1</td>
<td></td>
<td>从局部变量1中装载float类型值入栈</td>
</tr>
<tr>
<td>0x24</td>
<td>fload_2</td>
<td></td>
<td>从局部变量2中装载float类型值入栈</td>
</tr>
<tr>
<td>0x25</td>
<td>fload_3</td>
<td></td>
<td>从局部变量3中装载float类型值入栈</td>
</tr>
<tr>
<td>0x18</td>
<td>（wide）dload</td>
<td>indexbyte</td>
<td>从局部变量indexbyte中装载引用类型值入栈</td>
</tr>
<tr>
<td>0x26</td>
<td>dload_0</td>
<td></td>
<td>从局部变量0中装载double类型值入栈</td>
</tr>
<tr>
<td>0x27</td>
<td>dload_1</td>
<td></td>
<td>从局部变量1中装载double类型值入栈</td>
</tr>
<tr>
<td>0x28</td>
<td>dload_2</td>
<td></td>
<td>从局部变量3中装载double类型值入栈</td>
</tr>
<tr>
<td>0x29</td>
<td>dload_3</td>
<td></td>
<td>从局部变量3中装载double类型值入栈</td>
</tr>
<tr>
<td>0x32</td>
<td>aaload</td>
<td></td>
<td>从引用类型数组中装载指定项的值入栈</td>
</tr>
<tr>
<td>0x2e</td>
<td>iaload</td>
<td></td>
<td>从int类型数组中装载指定项的值入栈</td>
</tr>
<tr>
<td>0x2f</td>
<td>laload</td>
<td></td>
<td>从long类型数组中装载指定项的值入栈</td>
</tr>
<tr>
<td>0x30</td>
<td>faload</td>
<td></td>
<td>从float类型数组中装载指定项的值入栈</td>
</tr>
<tr>
<td>0x31</td>
<td>daload</td>
<td></td>
<td>从double类型数组中装载指定项的值入栈</td>
</tr>
<tr>
<td>0x33</td>
<td>baload</td>
<td></td>
<td>从boolean或者byte类型数组中装载指定项的值入栈（<br>先转换为int类型值，后压栈）。</td>
</tr>
<tr>
<td>0x34</td>
<td>caload</td>
<td></td>
<td>从char类型数组中装载指定项的值入栈 <br>（先转换为int类型值，后压栈）。</td>
</tr>
<tr>
<td>0x35</td>
<td>saload</td>
<td></td>
<td>从short类型数组中装载指定项的值入栈 <br>（先转换为int类型值，后压栈）。</td>
</tr>
</tbody>
</table>
<h3 id="将栈顶值保存到局部变量中指令"><a href="#将栈顶值保存到局部变量中指令" class="headerlink" title="将栈顶值保存到局部变量中指令"></a><strong>将栈顶值保存到局部变量中指令</strong></h3><table>
<thead>
<tr>
<th>0x3a</th>
<th>(wide)astore</th>
<th>indexbyte</th>
<th>将栈顶引用类型值保存到局部变量indexbyte中。</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x4b</td>
<td>astroe_0</td>
<td></td>
<td>将栈顶引用类型值保存到局部变量0中。</td>
</tr>
<tr>
<td>0x4c</td>
<td>astore_1</td>
<td></td>
<td>将栈顶引用类型值保存到局部变量1中。</td>
</tr>
<tr>
<td>0x4d</td>
<td>astore_2</td>
<td></td>
<td>将栈顶引用类型值保存到局部变量2中。</td>
</tr>
<tr>
<td>0x4e</td>
<td>astore_3</td>
<td></td>
<td>将栈顶引用类型值保存到局部变量3中。</td>
</tr>
<tr>
<td>0x36</td>
<td>(wide)istore</td>
<td>indexbyte</td>
<td>将栈顶int类型值保存到局部变量indexbyte中。</td>
</tr>
<tr>
<td>0x3b</td>
<td>istore_0</td>
<td></td>
<td>将栈顶int类型值保存到局部变量0中。</td>
</tr>
<tr>
<td>0x3c</td>
<td>istore_1</td>
<td></td>
<td>将栈顶int类型值保存到局部变量1中。</td>
</tr>
<tr>
<td>0x3d</td>
<td>istore_2</td>
<td></td>
<td>将栈顶int类型值保存到局部变量2中。</td>
</tr>
<tr>
<td>0x3e</td>
<td>istore_3</td>
<td></td>
<td>将栈顶int类型值保存到局部变量3中。</td>
</tr>
<tr>
<td>0x37</td>
<td>(wide)lstore</td>
<td>indexbyte</td>
<td>将栈顶long类型值保存到局部变量indexbyte中。</td>
</tr>
<tr>
<td>0x3f</td>
<td>lstore_0</td>
<td></td>
<td>将栈顶long类型值保存到局部变量0中。</td>
</tr>
<tr>
<td>0x40</td>
<td>lstore_1</td>
<td></td>
<td>将栈顶long类型值保存到局部变量1中。</td>
</tr>
<tr>
<td>0x41</td>
<td>lstore_2</td>
<td></td>
<td>将栈顶long类型值保存到局部变量2中。</td>
</tr>
<tr>
<td>0x42</td>
<td>lstroe_3</td>
<td></td>
<td>将栈顶long类型值保存到局部变量3中。</td>
</tr>
<tr>
<td>0x38</td>
<td>(wide)fstore</td>
<td>indexbyte</td>
<td>将栈顶float类型值保存到局部变量indexbyte中。</td>
</tr>
<tr>
<td>0x43</td>
<td>fstore_0</td>
<td></td>
<td>将栈顶float类型值保存到局部变量0中。</td>
</tr>
<tr>
<td>0x44</td>
<td>fstore_1</td>
<td></td>
<td>将栈顶float类型值保存到局部变量1中。</td>
</tr>
<tr>
<td>0x45</td>
<td>fstore_2</td>
<td></td>
<td>将栈顶float类型值保存到局部变量2中。</td>
</tr>
<tr>
<td>0x46</td>
<td>fstore_3</td>
<td></td>
<td>将栈顶float类型值保存到局部变量3中。</td>
</tr>
<tr>
<td>0x39</td>
<td>(wide)dstore</td>
<td>indexbyte</td>
<td>将栈顶double类型值保存到局部变量indexbyte中。</td>
</tr>
<tr>
<td>0x47</td>
<td>dstore_0</td>
<td></td>
<td>将栈顶double类型值保存到局部变量0中。</td>
</tr>
<tr>
<td>0x48</td>
<td>dstore_1</td>
<td></td>
<td>将栈顶double类型值保存到局部变量1中。</td>
</tr>
<tr>
<td>0x49</td>
<td>dstore_2</td>
<td></td>
<td>将栈顶double类型值保存到局部变量2中。</td>
</tr>
<tr>
<td>0x4a</td>
<td>dstore_3</td>
<td></td>
<td>将栈顶double类型值保存到局部变量3中。</td>
</tr>
<tr>
<td>0x53</td>
<td>aastore</td>
<td></td>
<td>将栈顶引用类型值保存到指定引用类型数组的指定项。</td>
</tr>
<tr>
<td>0x4f</td>
<td>iastore</td>
<td></td>
<td>将栈顶int类型值保存到指定int类型数组的指定项。</td>
</tr>
<tr>
<td>0x50</td>
<td>lastore</td>
<td></td>
<td>将栈顶long类型值保存到指定long类型数组的指定项。</td>
</tr>
<tr>
<td>0x51</td>
<td>fastore</td>
<td></td>
<td>将栈顶float类型值保存到指定float类型数组的指定项。</td>
</tr>
<tr>
<td>0x52</td>
<td>dastore</td>
<td></td>
<td>将栈顶double类型值保存到指定double类型数组的指定项。</td>
</tr>
<tr>
<td>0x54</td>
<td>bastroe</td>
<td></td>
<td>将栈顶boolean类型值或byte类型值保存到指定boolean<br>类型数组或byte类型数组的指定项。</td>
</tr>
<tr>
<td>0x55</td>
<td>castore</td>
<td></td>
<td>将栈顶char类型值保存到指定char类型数组的指定项。</td>
</tr>
<tr>
<td>0x56</td>
<td>sastore</td>
<td></td>
<td>将栈顶short类型值保存到指定short类型数组的指定项。</td>
</tr>
</tbody>
</table>
<h3 id="wide-指令"><a href="#wide-指令" class="headerlink" title="wide**指令**"></a><strong>wide**</strong>指令**</h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xc4</td>
<td>wide</td>
<td></td>
<td>使用附加字节扩展局部变量索引（iinc指令特殊）。</td>
</tr>
</tbody>
</table>
<h3 id="通用（无类型）栈操作指令"><a href="#通用（无类型）栈操作指令" class="headerlink" title="通用（无类型）栈操作指令"></a><strong>通用（无类型）栈操作指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td>nop</td>
<td></td>
<td>空操作。</td>
</tr>
<tr>
<td>0x57</td>
<td>pop</td>
<td></td>
<td>从栈顶弹出一个字长的数据。</td>
</tr>
<tr>
<td>0x58</td>
<td>pop2</td>
<td></td>
<td>从栈顶弹出两个字长的数据。</td>
</tr>
<tr>
<td>0x59</td>
<td>dup</td>
<td></td>
<td>复制栈顶一个字长的数据，将复制后的数据压栈。</td>
</tr>
<tr>
<td>0x5a</td>
<td>dup_x1</td>
<td></td>
<td>复制栈顶一个字长的数据，弹出栈顶两个字长数据，<br>先将复制后的数据压栈，再将弹出的两个字长数据压栈。</td>
</tr>
<tr>
<td>0x5b</td>
<td>dup_x2</td>
<td></td>
<td>复制栈顶一个字长的数据，弹出栈顶三个字长的数据，<br>将复制后的数据压栈，再将弹出的三个字长的数据压栈。</td>
</tr>
<tr>
<td>0x5c</td>
<td>dup2</td>
<td></td>
<td>复制栈顶两个字长的数据，将复制后的两个字长的数据压栈。</td>
</tr>
<tr>
<td>0x5d</td>
<td>dup2_x1</td>
<td></td>
<td>复制栈顶两个字长的数据，弹出栈顶三个字长的数据，<br>将复制后的两个字长的数据压栈，再将弹出的三个字长的数据压栈。</td>
</tr>
<tr>
<td>0x5e</td>
<td>dup2_x2</td>
<td></td>
<td>复制栈顶两个字长的数据，弹出栈顶四个字长的数据，<br>将复制后的两个字长的数据压栈，再将弹出的四个字长的数据压栈。</td>
</tr>
<tr>
<td>0x5f</td>
<td>swap</td>
<td></td>
<td>交换栈顶两个字长的数据的位置。<a href="http://lib.csdn.net/base/javaee" target="_blank" rel="external">Java</a>指令中没有提供以<br>两个字长为单位的交换指令。</td>
</tr>
</tbody>
</table>
<h3 id="类型转换指令"><a href="#类型转换指令" class="headerlink" title="类型转换指令"></a><strong>类型转换指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x86</td>
<td>i2f</td>
<td></td>
<td>将栈顶int类型值转换为float类型值。</td>
</tr>
<tr>
<td>0x85</td>
<td>i2l</td>
<td></td>
<td>将栈顶int类型值转换为long类型值。</td>
</tr>
<tr>
<td>0x87</td>
<td>i2d</td>
<td></td>
<td>将栈顶int类型值转换为double类型值。</td>
</tr>
<tr>
<td>0x8b</td>
<td>f2i</td>
<td></td>
<td>将栈顶float类型值转换为int类型值。</td>
</tr>
<tr>
<td>0x8c</td>
<td>f2l</td>
<td></td>
<td>将栈顶float类型值转换为long类型值。</td>
</tr>
<tr>
<td>0x8d</td>
<td>f2d</td>
<td></td>
<td>将栈顶float类型值转换为double类型值。</td>
</tr>
<tr>
<td>0x88</td>
<td>l2i</td>
<td></td>
<td>将栈顶long类型值转换为int类型值。</td>
</tr>
<tr>
<td>0x89</td>
<td>l2f</td>
<td></td>
<td>将栈顶long类型值转换为float类型值。</td>
</tr>
<tr>
<td>0x8a</td>
<td>l2d</td>
<td></td>
<td>将栈顶long类型值转换double类型值。</td>
</tr>
<tr>
<td>0x8e</td>
<td>d2i</td>
<td></td>
<td>将栈顶double类型值转换为int类型值。</td>
</tr>
<tr>
<td>0x90</td>
<td>d2f</td>
<td></td>
<td>将栈顶double类型值转换为float类型值。</td>
</tr>
<tr>
<td>0x8f</td>
<td>d2l</td>
<td></td>
<td>将栈顶double类型值转换为long类型值。</td>
</tr>
<tr>
<td>0x91</td>
<td>i2b</td>
<td></td>
<td>将栈顶int类型值截断成byte类型，后带符号扩展成int类型值入栈。</td>
</tr>
<tr>
<td>0x92</td>
<td>i2c</td>
<td></td>
<td>将栈顶int类型值截断成char类型值，后带符号扩展成int类型值入栈。</td>
</tr>
<tr>
<td>0x93</td>
<td>i2s</td>
<td></td>
<td>将栈顶int类型值截断成short类型值，后带符号扩展成int类型值入栈。</td>
</tr>
</tbody>
</table>
<h3 id="整数运算"><a href="#整数运算" class="headerlink" title="整数运算"></a><strong>整数运算</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x60</td>
<td>iadd</td>
<td></td>
<td>将栈顶两int类型数相加，结果入栈。</td>
</tr>
<tr>
<td>0x64</td>
<td>isub</td>
<td></td>
<td>将栈顶两int类型数相减，结果入栈。</td>
</tr>
<tr>
<td>0x68</td>
<td>imul</td>
<td></td>
<td>将栈顶两int类型数相乘，结果入栈。</td>
</tr>
<tr>
<td>0x6c</td>
<td>idiv</td>
<td></td>
<td>将栈顶两int类型数相除，结果入栈。</td>
</tr>
<tr>
<td>0x70</td>
<td>irem</td>
<td></td>
<td>将栈顶两int类型数取模，结果入栈。</td>
</tr>
<tr>
<td>0x74</td>
<td>ineg</td>
<td></td>
<td>将栈顶int类型值取负，结果入栈。</td>
</tr>
<tr>
<td>0x61</td>
<td>ladd</td>
<td></td>
<td>将栈顶两long类型数相加，结果入栈。</td>
</tr>
<tr>
<td>0x65</td>
<td>lsub</td>
<td></td>
<td>将栈顶两long类型数相减，结果入栈。</td>
</tr>
<tr>
<td>0x69</td>
<td>lmul</td>
<td></td>
<td>将栈顶两long类型数相乘，结果入栈。</td>
</tr>
<tr>
<td>0x6d</td>
<td>ldiv</td>
<td></td>
<td>将栈顶两long类型数相除，结果入栈。</td>
</tr>
<tr>
<td>0x71</td>
<td>lrem</td>
<td></td>
<td>将栈顶两long类型数取模，结果入栈。</td>
</tr>
<tr>
<td>0x75</td>
<td>lneg</td>
<td></td>
<td>将栈顶long类型值取负，结果入栈。</td>
</tr>
<tr>
<td>0x84</td>
<td>(wide)iinc</td>
<td>indexbyteconstbyte</td>
<td>将整数值constbyte加到indexbyte指定的int类型的局部变量中。</td>
</tr>
</tbody>
</table>
<p><strong>浮点运算</strong></p>
<table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x62</td>
<td>fadd</td>
<td></td>
<td>将栈顶两float类型数相加，结果入栈。</td>
</tr>
<tr>
<td>0x66</td>
<td>fsub</td>
<td></td>
<td>将栈顶两float类型数相减，结果入栈。</td>
</tr>
<tr>
<td>0x6a</td>
<td>fmul</td>
<td></td>
<td>将栈顶两float类型数相乘，结果入栈。</td>
</tr>
<tr>
<td>0x6e</td>
<td>fdiv</td>
<td></td>
<td>将栈顶两float类型数相除，结果入栈。</td>
</tr>
<tr>
<td>0x72</td>
<td>frem</td>
<td></td>
<td>将栈顶两float类型数取模，结果入栈。</td>
</tr>
<tr>
<td>0x76</td>
<td>fneg</td>
<td></td>
<td>将栈顶float类型值取反，结果入栈。</td>
</tr>
<tr>
<td>0x63</td>
<td>dadd</td>
<td></td>
<td>将栈顶两double类型数相加，结果入栈。</td>
</tr>
<tr>
<td>0x67</td>
<td>dsub</td>
<td></td>
<td>将栈顶两double类型数相减，结果入栈。</td>
</tr>
<tr>
<td>0x6b</td>
<td>dmul</td>
<td></td>
<td>将栈顶两double类型数相乘，结果入栈。</td>
</tr>
<tr>
<td>0x6f</td>
<td>ddiv</td>
<td></td>
<td>将栈顶两double类型数相除，结果入栈。</td>
</tr>
<tr>
<td>0x73</td>
<td>drem</td>
<td></td>
<td>将栈顶两double类型数取模，结果入栈。</td>
</tr>
<tr>
<td>0x77</td>
<td>dneg</td>
<td></td>
<td>将栈顶double类型值取负，结果入栈。</td>
</tr>
</tbody>
</table>
<h3 id="逻辑运算——移位运算"><a href="#逻辑运算——移位运算" class="headerlink" title="逻辑运算——移位运算"></a><strong>逻辑运算——移位运算</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x78</td>
<td>ishl</td>
<td></td>
<td>左移int类型值。</td>
</tr>
<tr>
<td>0x79</td>
<td>lshl</td>
<td></td>
<td>左移long类型值。</td>
</tr>
<tr>
<td>0x7a</td>
<td>ishr</td>
<td></td>
<td>算术右移int类型值。</td>
</tr>
<tr>
<td>0x7b</td>
<td>lshr</td>
<td></td>
<td>算术右移long类型值。</td>
</tr>
<tr>
<td>0x7c</td>
<td>iushr</td>
<td></td>
<td>逻辑右移int类型值。</td>
</tr>
<tr>
<td>0x7d</td>
<td>lushr</td>
<td></td>
<td>逻辑右移long类型值。</td>
</tr>
</tbody>
</table>
<h3 id="逻辑运算——按位布尔运算"><a href="#逻辑运算——按位布尔运算" class="headerlink" title="逻辑运算——按位布尔运算"></a><strong>逻辑运算——按位布尔运算</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x73</td>
<td>iand</td>
<td></td>
<td>对int类型按位与运算。</td>
</tr>
<tr>
<td>0x7f</td>
<td>land</td>
<td></td>
<td>对long类型的按位与运算。</td>
</tr>
<tr>
<td>0x80</td>
<td>ior</td>
<td></td>
<td>对int类型的按位或运算。</td>
</tr>
<tr>
<td>0x81</td>
<td>lor</td>
<td></td>
<td>对long类型的按位或运算。</td>
</tr>
<tr>
<td>0x82</td>
<td>ixor</td>
<td></td>
<td>对int类型的按位异或运算。</td>
</tr>
<tr>
<td>0x83</td>
<td>lxor</td>
<td></td>
<td>对long类型的按位异或运算。</td>
</tr>
</tbody>
</table>
<h3 id="控制流指令——条件跳转指令"><a href="#控制流指令——条件跳转指令" class="headerlink" title="控制流指令——条件跳转指令"></a><strong>控制流指令——条件跳转指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x99</td>
<td>ifeq</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶int类型值为0则跳转。</td>
</tr>
<tr>
<td>0x9a</td>
<td>ifne</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶int类型值不为0则跳转。</td>
</tr>
<tr>
<td>0x9b</td>
<td>iflt</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶int类型值小于0则跳转。</td>
</tr>
<tr>
<td>0x9e</td>
<td>ifle</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶int类型值小于等于0则跳转。</td>
</tr>
<tr>
<td>0x9d</td>
<td>ifgt</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶int类型值大于0则跳转。</td>
</tr>
<tr>
<td>0x9c</td>
<td>ifge</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶int类型值大于等于0则跳转。</td>
</tr>
<tr>
<td>0x9f</td>
<td>if_icmpeq</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两int类型值相等则跳转。</td>
</tr>
<tr>
<td>0xa0</td>
<td>if_icmpne</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两int类型值不相等则跳转。</td>
</tr>
<tr>
<td>0xa1</td>
<td>if_icmplt</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两int类型值前小于后则跳转。</td>
</tr>
<tr>
<td>0xa4</td>
<td>if_icmple</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两int类型值前小于等于后则跳转。</td>
</tr>
<tr>
<td>0xa3</td>
<td>if_icmpgt</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两int类型值前大于后则跳转。</td>
</tr>
<tr>
<td>0xa2</td>
<td>if_icmpge</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两int类型值前大于等于后则跳转。</td>
</tr>
<tr>
<td>0xc6</td>
<td>ifnull</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶引用值为null则跳转。</td>
</tr>
<tr>
<td>0xc7</td>
<td>ifnonnull</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶引用值不为null则跳转。</td>
</tr>
<tr>
<td>0xa5</td>
<td>if_acmpeq</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两引用类型值相等则跳转。</td>
</tr>
<tr>
<td>0xa6</td>
<td>if_acmpne</td>
<td>branchbyte1branchbyte2</td>
<td>若栈顶两引用类型值不相等则跳转。</td>
</tr>
</tbody>
</table>
<h3 id="控制流指令——比较指令"><a href="#控制流指令——比较指令" class="headerlink" title="控制流指令——比较指令"></a><strong>控制流指令——比较指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x94</td>
<td>lcmp</td>
<td></td>
<td>比较栈顶两long类型值，前者大，1入栈；相等，0入栈；<br>后者大，-1入栈。</td>
</tr>
<tr>
<td>0x95</td>
<td>fcmpl</td>
<td></td>
<td>比较栈顶两float类型值，前者大，1入栈；相等，0入栈；<br>后者大，-1入栈；有NaN存在，-1入栈。</td>
</tr>
<tr>
<td>0x96</td>
<td>fcmpg</td>
<td></td>
<td>比较栈顶两float类型值，前者大，1入栈；相等，0入栈；<br>后者大，-1入栈；有NaN存在，-1入栈。</td>
</tr>
<tr>
<td>0x97</td>
<td>dcmpl</td>
<td></td>
<td>比较栈顶两double类型值，前者大，1入栈；相等，0入栈；<br>后者大，-1入栈；有NaN存在，-1入栈。</td>
</tr>
<tr>
<td>0x98</td>
<td>dcmpg</td>
<td></td>
<td>比较栈顶两double类型值，前者大，1入栈；相等，0入栈；<br>后者大，-1入栈；有NaN存在，-1入栈。</td>
</tr>
</tbody>
</table>
<h3 id="控制流指令——无条件跳转指令"><a href="#控制流指令——无条件跳转指令" class="headerlink" title="控制流指令——无条件跳转指令"></a><strong>控制流指令——无条件跳转指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xa7</td>
<td>goto</td>
<td>branchbyte1branchbyte2</td>
<td>无条件跳转到指定位置。</td>
</tr>
<tr>
<td>0xc8</td>
<td>goto_w</td>
<td>branchbyte1branchbyte2branchbyte3branchbyte4</td>
<td>无条件跳转到指定位置（宽索引）。</td>
</tr>
</tbody>
</table>
<h3 id="控制流指令——表跳转指令"><a href="#控制流指令——表跳转指令" class="headerlink" title="控制流指令——表跳转指令"></a><strong>控制流指令——表跳转指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xaa</td>
<td>tableswitch</td>
<td><0-3bytepad><br>defaultbyte1<br>defaultbyte2<br>defaultbyte3<br>defaultbyte4<br>lowbyte1<br>lowbyte2<br>lowbyte3<br>lowbyte4<br>highbyte1<br>highbyte2<br>highbyte3<br>highbyte4<br>jump offsets…</0-3bytepad></td>
<td>通过索引访问跳转表，并跳转。</td>
</tr>
<tr>
<td>0xab</td>
<td>lookupswitch</td>
<td><0-3bytepad><br>defaultbyte1<br>defaultbyte2<br>defaultbyte3<br>defaultbyte4<br>npairs1<br>npairs2<br>npairs3<br>npairs4<br>match offsets</0-3bytepad></td>
<td>通过键值访问跳转表，并跳转。</td>
</tr>
</tbody>
</table>
<h3 id="控制流指令——异常和-finally"><a href="#控制流指令——异常和-finally" class="headerlink" title="控制流指令——异常和**finally**"></a><strong>控制流指令——异常和**</strong>finally**</h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xbf</td>
<td>athrow</td>
<td></td>
<td>抛出异常。</td>
</tr>
<tr>
<td>0xa8</td>
<td>jsr</td>
<td>branchbyte1branchbyte2</td>
<td>跳转到子例程序。</td>
</tr>
<tr>
<td>0xc9</td>
<td>jsr_w</td>
<td>branchbyte1branchbyte2branchbyte3branchbyte4</td>
<td>跳转到子例程序（宽索引）。</td>
</tr>
<tr>
<td>0xa9</td>
<td>(wide)ret</td>
<td>indexbyte</td>
<td>返回子例程序</td>
</tr>
</tbody>
</table>
<h3 id="对象操作指令"><a href="#对象操作指令" class="headerlink" title="对象操作指令"></a><strong>对象操作指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xbb</td>
<td>new</td>
<td>indexbyte1indexbyte2</td>
<td>创建新的对象实例。</td>
</tr>
<tr>
<td>0xc0</td>
<td>checkcast</td>
<td>indexbyte1indexbyte</td>
<td>类型强转。</td>
</tr>
<tr>
<td>0xc1</td>
<td>instanceof</td>
<td>indexbyte1indexbyte2</td>
<td>判断类型。</td>
</tr>
<tr>
<td>0xb4</td>
<td>getfield</td>
<td>indexbyte1indexbyte2</td>
<td>获取对象字段的值。</td>
</tr>
<tr>
<td>0xb5</td>
<td>putfield</td>
<td>indexbyte1indexbyte2</td>
<td>给对象字段赋值。</td>
</tr>
<tr>
<td>0xb2</td>
<td>getstatic</td>
<td>indexbyte1indexbyte2</td>
<td>获取静态字段的值。</td>
</tr>
<tr>
<td>0xb3</td>
<td>putstatic</td>
<td>indexbyte1indexbyte2</td>
<td>给静态字段赋值。</td>
</tr>
</tbody>
</table>
<h3 id="数组操作指令"><a href="#数组操作指令" class="headerlink" title="数组操作指令"></a><strong>数组操作指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xbc</td>
<td>newarray</td>
<td>atype</td>
<td>创建type类型的数组。</td>
</tr>
<tr>
<td>0xbd</td>
<td>anewarray</td>
<td>indexbyte1indexbyte2</td>
<td>创建引用类型的数组。</td>
</tr>
<tr>
<td>0xbe</td>
<td>arraylength</td>
<td></td>
<td>获取一维数组的长度。</td>
</tr>
<tr>
<td>0xc5</td>
<td>multianewarray</td>
<td>indexbyte1indexbyte2dimension</td>
<td>创建dimension维度的数组。</td>
</tr>
</tbody>
</table>
<h3 id="方法调用指令"><a href="#方法调用指令" class="headerlink" title="方法调用指令"></a><strong>方法调用指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xb7</td>
<td>invokespecial</td>
<td>indexbyte1indexbyte2</td>
<td>编译时方法绑定调用方法。</td>
</tr>
<tr>
<td>0xb6</td>
<td>invokevirtual</td>
<td>indexbyte1indexbyte2</td>
<td>运行时方法绑定调用方法。</td>
</tr>
<tr>
<td>0xb8</td>
<td>invokestatic</td>
<td>indexbyte1indexbyte2</td>
<td>调用静态方法。</td>
</tr>
<tr>
<td>0xb9</td>
<td>invokeinterface</td>
<td>indexbyte1indexbyte2count0</td>
<td>调用接口方法。</td>
</tr>
</tbody>
</table>
<h3 id="方法返回指令"><a href="#方法返回指令" class="headerlink" title="方法返回指令"></a><strong>方法返回指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xac</td>
<td>ireturn</td>
<td></td>
<td>返回int类型值。</td>
</tr>
<tr>
<td>0xad</td>
<td>lreturn</td>
<td></td>
<td>返回long类型值。</td>
</tr>
<tr>
<td>0xae</td>
<td>freturn</td>
<td></td>
<td>返回float类型值。</td>
</tr>
<tr>
<td>0xaf</td>
<td>dreturn</td>
<td></td>
<td>返回double类型值。</td>
</tr>
<tr>
<td>0xb0</td>
<td>areturn</td>
<td></td>
<td>返回引用类型值。</td>
</tr>
<tr>
<td>0xb1</td>
<td>return</td>
<td></td>
<td>void函数返回。</td>
</tr>
</tbody>
</table>
<h3 id="线程同步指令"><a href="#线程同步指令" class="headerlink" title="线程同步指令"></a><strong>线程同步指令</strong></h3><table>
<thead>
<tr>
<th><strong>指令码</strong></th>
<th><strong>操作码（助记符）</strong></th>
<th><strong>操作数</strong></th>
<th><strong>描述（栈指操作数栈）</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0xc2</td>
<td>monitorenter</td>
<td></td>
<td>进入并获得对象监视器。</td>
</tr>
<tr>
<td>0xc3</td>
<td>monitorexit</td>
<td></td>
<td>释放并退出对象监视器。</td>
</tr>
</tbody>
</table>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Java字节码/">Java字节码</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java字节码/">Java字节码</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Class文件格式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/Class文件格式/" class="article-date">
      <time datetime="2020-05-28T12:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/Class文件格式/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/Class文件格式/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/Class文件格式/">Class文件格式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Class文件格式"><a href="#Class文件格式" class="headerlink" title="Class文件格式"></a>Class文件格式</h2><table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>u4</td>
<td>magic</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>minor_version</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>major_version</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>constant_pool_count</td>
<td>1</td>
</tr>
<tr>
<td>cp_info</td>
<td>constant_pool</td>
<td>constant_pool_count-1</td>
</tr>
<tr>
<td>u2</td>
<td>access_flag</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>this_class</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>super_class</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces_count</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces</td>
<td>interfaces_count</td>
</tr>
<tr>
<td>u2</td>
<td>fields_count</td>
<td>1</td>
</tr>
<tr>
<td>field_info</td>
<td>fields</td>
<td>fields_count</td>
</tr>
<tr>
<td>u2</td>
<td>methods_count</td>
<td>1</td>
</tr>
<tr>
<td>method_info</td>
<td>methods</td>
<td>methods_count</td>
</tr>
<tr>
<td>u2</td>
<td>attributes_count</td>
<td>1</td>
</tr>
<tr>
<td>attribute_info</td>
<td>attributes</td>
<td>attributes_count</td>
</tr>
</tbody>
</table>
<p>字节码的组成：</p>
<ul>
<li>魔数（magic）+最小版本号（monir_version）+最大版本号(major_version)</li>
<li>常量池大小+常量池</li>
<li>访问标志</li>
<li>类索引，父类索引，接口索引集合</li>
<li>字段表集合</li>
<li>方法表集合</li>
<li>属性表集合</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/字节码/">字节码</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/字节码/">字节码</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-java泛型" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/java泛型/" class="article-date">
      <time datetime="2020-05-28T12:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/java泛型/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/java泛型/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/java泛型/">java泛型</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="java泛型"><a href="#java泛型" class="headerlink" title="java泛型"></a>java泛型</h1><p>Java从1.5之后支持泛型，泛型的本质是参数化类型，也就是说所操作的数据类型被指定为一个参数。这种参数类型可以用在类、接口和方法的创建中，分别称为泛型类、泛型接口、泛型方法。</p>
<p>1.类型安全。泛型的主要目标是提高Java程序的类型安全。通过知道使用放心定义的变量的类型限制，并且可以在一个高得多的成熟度上验证类型。假设如果没有反省，这些假设就只存在于程序员的头脑中消除强制。一类型安全范畴的主要目标是提高Java程序的类型安全通过知道使用放心定义的变量的类型限制，并且可以在一个高得多的成熟度上验证类型。假设如果没有反省，这些假设就只存在于程序员的头脑中。</p>
<p>2.消除强制类型转换翻新的一个附带的好处，是消除源代码中，许多强制类型转换，这使得代码更加可读，并且减少了出错的机会，</p>
<p>3000赞的性能收益饭行为较大的优化带来了可能在梵行的初始视线中，编译器将强制类型。消除强制类型转换翻新的一个附带的好处，是消除源代码中，许多强制类型转换，这使得代码更加可读，并且减少了出错的机会，3000赞的性能收益饭行为较大的优化带来了可能在梵行的初始视线中，编译器将强制类型。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java泛型/">java泛型</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java泛型/">java泛型</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-dubbo架构设计" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/dubbo架构设计/" class="article-date">
      <time datetime="2020-05-28T12:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/dubbo架构设计/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/dubbo架构设计/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/dubbo架构设计/">dubbo架构设计</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="dubbo架构设计"><a href="#dubbo架构设计" class="headerlink" title="dubbo架构设计"></a>dubbo架构设计</h3><p><img src="https://gitee.com/idea4j/imagerep/raw/master/images/image-20200821100631881.png" alt="image-20200821100631881"></p>
<p>淡蓝色是服务提供者使用到的接口，淡绿色是服务消费者使用接口，中轴线上是双方都用到的接口。</p>
<p>从下至上分为十层，各层均为单向依赖，右边的黑色箭头代表之间的依赖关系，每一层都可以剥离上层被复用，其中，Service和Config层为API，其他各层均为SPI。</p>
<p>绿色小块的为扩展接口，蓝色小块为实现类</p>
<p>蓝色虚线为初始化过程，即启动时组装链，红色实线为方法调用过程，即运行是调用链，紫色三角箭头为继承</p>
<p>config配置层：对外配置接口，以ServiceConfig,ReferenceConfig为中心，可以直接初始化配置类，也可以通过spring解析配置生成配置类</p>
<p>proxy服务代理层</p>
<p>registry注册中心层</p>
<p>cluster路由层</p>
<p>monitor监控层</p>
<p>ptotocol远程调用层</p>
<p>exchange信息交换层</p>
<p>transport网络传输层</p>
<p>serialize 数据序列化层</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/dubbo/">dubbo</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dubbo/">dubbo</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-dubbo文档摘抄" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/dubbo文档摘抄/" class="article-date">
      <time datetime="2020-05-28T12:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/dubbo文档摘抄/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/dubbo文档摘抄/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/dubbo文档摘抄/">dubbo负载均衡</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Dubbo 提供了4种负载均衡实现，分别是：</p>
<ul>
<li>基于权重随机算法的 RandomLoadBalance；</li>
<li>基于最少活跃调用数算法的 LeastActiveLoadBalance；</li>
<li>基于 hash 一致性的 ConsistentHashLoadBalance；</li>
<li>基于加权轮询算法的 RoundRobinLoadBalance；</li>
</ul>
<p>在 Dubbo 中，所有负载均衡实现类均继承自 AbstractLoadBalance，该类实现了 LoadBalance 接口，并封装了一些公共的逻辑。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">Invoker&lt;T&gt; <span class="title">select</span><span class="params">(List&lt;Invoker&lt;T&gt;&gt; invokers, URL url, Invocation invocation)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (invokers == <span class="keyword">null</span> || invokers.isEmpty())</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    <span class="comment">// 如果 invokers 列表中仅有一个 Invoker，直接返回即可，无需进行负载均衡</span></div><div class="line">    <span class="keyword">if</span> (invokers.size() == <span class="number">1</span>)</div><div class="line">        <span class="keyword">return</span> invokers.get(<span class="number">0</span>);</div><div class="line">    </div><div class="line">    <span class="comment">// 调用 doSelect 方法进行负载均衡，该方法为抽象方法，由子类实现</span></div><div class="line">    <span class="keyword">return</span> doSelect(invokers, url, invocation);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">protected</span> <span class="keyword">abstract</span> &lt;T&gt; <span class="function">Invoker&lt;T&gt; <span class="title">doSelect</span><span class="params">(List&lt;Invoker&lt;T&gt;&gt; invokers, URL url, Invocation invocation)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="RandomLoadBalance"><a href="#RandomLoadBalance" class="headerlink" title="RandomLoadBalance"></a>RandomLoadBalance</h3><p>加权随机算法，算法思想：假如有一组服务器servers=[A,B,C]，他们对应的权重为weights[5,3,2],权重总和为10.现在把这些权重值平铺在一维坐标值上，[0, 5) 区间属于服务器 A，[5, 8) 区间属于服务器 B，[8, 10) 区间属于服务器 C。接下来通过随机数生成器生成一个范围在 [0, 10) 之间的随机数，然后计算这个随机数会落到哪个区间上。比如数字3会落到服务器 A 对应的区间上，此时返回服务器 A 即可。权重越大的机器，在坐标轴上对应的区间范围就越大，因此随机数生成器生成的数字就会有更大的概率落到此区间内。只要随机数生成器产生的随机数分布性很好，在经过多次选择后，每个服务器被选中的次数比例接近其权重比例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomLoadBalance</span> <span class="keyword">extends</span> <span class="title">AbstractLoadBalance</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String NAME = <span class="string">"random"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Random random = <span class="keyword">new</span> Random();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> &lt;T&gt; <span class="function">Invoker&lt;T&gt; <span class="title">doSelect</span><span class="params">(List&lt;Invoker&lt;T&gt;&gt; invokers, URL url, Invocation invocation)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> length = invokers.size();</div><div class="line">        <span class="keyword">int</span> totalWeight = <span class="number">0</span>;</div><div class="line">        <span class="keyword">boolean</span> sameWeight = <span class="keyword">true</span>;</div><div class="line">        <span class="comment">// 下面这个循环有两个作用，第一是计算总权重 totalWeight，</span></div><div class="line">        <span class="comment">// 第二是检测每个服务提供者的权重是否相同</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</div><div class="line">            <span class="keyword">int</span> weight = getWeight(invokers.get(i), invocation);</div><div class="line">            <span class="comment">// 累加权重</span></div><div class="line">            totalWeight += weight;</div><div class="line">            <span class="comment">// 检测当前服务提供者的权重与上一个服务提供者的权重是否相同，</span></div><div class="line">            <span class="comment">// 不相同的话，则将 sameWeight 置为 false。</span></div><div class="line">            <span class="keyword">if</span> (sameWeight &amp;&amp; i &gt; <span class="number">0</span></div><div class="line">                    &amp;&amp; weight != getWeight(invokers.get(i - <span class="number">1</span>), invocation)) &#123;</div><div class="line">                sameWeight = <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 下面的 if 分支主要用于获取随机数，并计算随机数落在哪个区间上</span></div><div class="line">        <span class="keyword">if</span> (totalWeight &gt; <span class="number">0</span> &amp;&amp; !sameWeight) &#123;</div><div class="line">            <span class="comment">// 随机获取一个 [0, totalWeight) 区间内的数字</span></div><div class="line">            <span class="keyword">int</span> offset = random.nextInt(totalWeight);</div><div class="line">            <span class="comment">// 循环让 offset 数减去服务提供者权重值，当 offset 小于0时，返回相应的 Invoker。</span></div><div class="line">            <span class="comment">// 举例说明一下，我们有 servers = [A, B, C]，weights = [5, 3, 2]，offset = 7。</span></div><div class="line">            <span class="comment">// 第一次循环，offset - 5 = 2 &gt; 0，即 offset &gt; 5，</span></div><div class="line">            <span class="comment">// 表明其不会落在服务器 A 对应的区间上。</span></div><div class="line">            <span class="comment">// 第二次循环，offset - 3 = -1 &lt; 0，即 5 &lt; offset &lt; 8，</span></div><div class="line">            <span class="comment">// 表明其会落在服务器 B 对应的区间上</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</div><div class="line">                <span class="comment">// 让随机值 offset 减去权重值</span></div><div class="line">                offset -= getWeight(invokers.get(i), invocation);</div><div class="line">                <span class="keyword">if</span> (offset &lt; <span class="number">0</span>) &#123;</div><div class="line">                    <span class="comment">// 返回相应的 Invoker</span></div><div class="line">                    <span class="keyword">return</span> invokers.get(i);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 如果所有服务提供者权重值相同，此时直接随机返回一个即可</span></div><div class="line">        <span class="keyword">return</span> invokers.get(random.nextInt(length));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="LeastActiveLoadBalance"><a href="#LeastActiveLoadBalance" class="headerlink" title="LeastActiveLoadBalance"></a>LeastActiveLoadBalance</h3><p>LeastActiveLoadBalance翻译过来是最小活跃数负载均衡。活跃调用数越小，表明该服务提供者效率越高，单位时间内可处理更多的请求。此时应优先将请求分配给该服务提供者。在具体实现中，每个服务提供者对应一个活跃数 active。初始情况下，所有服务提供者活跃数均为0。每收到一个请求，活跃数加1，完成请求后则将活跃数减1。在服务运行一段时间后，性能好的服务提供者处理请求的速度更快，因此活跃数下降的也越快，此时这样的服务提供者能够优先获取到新的服务请求、这就是最小活跃数负载均衡算法的基本思想。除了最小活跃数，LeastActiveLoadBalance 在实现上还引入了权重值。所以准确的来说，LeastActiveLoadBalance 是基于加权最小活跃数算法实现的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LeastActiveLoadBalance</span> <span class="keyword">extends</span> <span class="title">AbstractLoadBalance</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String NAME = <span class="string">"leastactive"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Random random = <span class="keyword">new</span> Random();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> &lt;T&gt; <span class="function">Invoker&lt;T&gt; <span class="title">doSelect</span><span class="params">(List&lt;Invoker&lt;T&gt;&gt; invokers, URL url, Invocation invocation)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> length = invokers.size();</div><div class="line">        <span class="comment">// 最小的活跃数</span></div><div class="line">        <span class="keyword">int</span> leastActive = -<span class="number">1</span>;</div><div class="line">        <span class="comment">// 具有相同“最小活跃数”的服务者提供者（以下用 Invoker 代称）数量</span></div><div class="line">        <span class="keyword">int</span> leastCount = <span class="number">0</span>; </div><div class="line">        <span class="comment">// leastIndexs 用于记录具有相同“最小活跃数”的 Invoker 在 invokers 列表中的下标信息</span></div><div class="line">        <span class="keyword">int</span>[] leastIndexs = <span class="keyword">new</span> <span class="keyword">int</span>[length];</div><div class="line">        <span class="keyword">int</span> totalWeight = <span class="number">0</span>;</div><div class="line">        <span class="comment">// 第一个最小活跃数的 Invoker 权重值，用于与其他具有相同最小活跃数的 Invoker 的权重进行对比，</span></div><div class="line">        <span class="comment">// 以检测是否“所有具有相同最小活跃数的 Invoker 的权重”均相等</span></div><div class="line">        <span class="keyword">int</span> firstWeight = <span class="number">0</span>;</div><div class="line">        <span class="keyword">boolean</span> sameWeight = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 遍历 invokers 列表</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</div><div class="line">            Invoker&lt;T&gt; invoker = invokers.get(i);</div><div class="line">            <span class="comment">// 获取 Invoker 对应的活跃数</span></div><div class="line">            <span class="keyword">int</span> active = RpcStatus.getStatus(invoker.getUrl(), invocation.getMethodName()).getActive();</div><div class="line">            <span class="comment">// 获取权重 - ⭐️</span></div><div class="line">            <span class="keyword">int</span> weight = invoker.getUrl().getMethodParameter(invocation.getMethodName(), Constants.WEIGHT_KEY, Constants.DEFAULT_WEIGHT);</div><div class="line">            <span class="comment">// 发现更小的活跃数，重新开始</span></div><div class="line">            <span class="keyword">if</span> (leastActive == -<span class="number">1</span> || active &lt; leastActive) &#123;</div><div class="line">            	<span class="comment">// 使用当前活跃数 active 更新最小活跃数 leastActive</span></div><div class="line">                leastActive = active;</div><div class="line">                <span class="comment">// 更新 leastCount 为 1</span></div><div class="line">                leastCount = <span class="number">1</span>;</div><div class="line">                <span class="comment">// 记录当前下标值到 leastIndexs 中</span></div><div class="line">                leastIndexs[<span class="number">0</span>] = i;</div><div class="line">                totalWeight = weight;</div><div class="line">                firstWeight = weight;</div><div class="line">                sameWeight = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 当前 Invoker 的活跃数 active 与最小活跃数 leastActive 相同 </span></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (active == leastActive) &#123;</div><div class="line">            	<span class="comment">// 在 leastIndexs 中记录下当前 Invoker 在 invokers 集合中的下标</span></div><div class="line">                leastIndexs[leastCount++] = i;</div><div class="line">                <span class="comment">// 累加权重</span></div><div class="line">                totalWeight += weight;</div><div class="line">                <span class="comment">// 检测当前 Invoker 的权重与 firstWeight 是否相等，</span></div><div class="line">                <span class="comment">// 不相等则将 sameWeight 置为 false</span></div><div class="line">                <span class="keyword">if</span> (sameWeight &amp;&amp; i &gt; <span class="number">0</span></div><div class="line">                    &amp;&amp; weight != firstWeight) &#123;</div><div class="line">                    sameWeight = <span class="keyword">false</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 当只有一个 Invoker 具有最小活跃数，此时直接返回该 Invoker 即可</span></div><div class="line">        <span class="keyword">if</span> (leastCount == <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> invokers.get(leastIndexs[<span class="number">0</span>]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 有多个 Invoker 具有相同的最小活跃数，但它们之间的权重不同</span></div><div class="line">        <span class="keyword">if</span> (!sameWeight &amp;&amp; totalWeight &gt; <span class="number">0</span>) &#123;</div><div class="line">        	<span class="comment">// 随机生成一个 [0, totalWeight) 之间的数字</span></div><div class="line">            <span class="keyword">int</span> offsetWeight = random.nextInt(totalWeight);</div><div class="line">            <span class="comment">// 循环让随机数减去具有最小活跃数的 Invoker 的权重值，</span></div><div class="line">            <span class="comment">// 当 offset 小于等于0时，返回相应的 Invoker</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; leastCount; i++) &#123;</div><div class="line">                <span class="keyword">int</span> leastIndex = leastIndexs[i];</div><div class="line">                <span class="comment">// 获取权重值，并让随机数减去权重值 - ⭐️</span></div><div class="line">                offsetWeight -= getWeight(invokers.get(leastIndex), invocation);</div><div class="line">                <span class="keyword">if</span> (offsetWeight &lt;= <span class="number">0</span>)</div><div class="line">                    <span class="keyword">return</span> invokers.get(leastIndex);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// 如果权重相同或权重为0时，随机返回一个 Invoker</span></div><div class="line">        <span class="keyword">return</span> invokers.get(leastIndexs[random.nextInt(leastCount)]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>大致的实现逻辑:</p>
<ol>
<li>遍历 invokers 列表，寻找活跃数最小的 Invoker</li>
<li>如果有多个 Invoker 具有相同的最小活跃数，此时记录下这些 Invoker 在 invokers 集合中的下标，并累加它们的权重，比较它们的权重值是否相等</li>
<li>如果只有一个 Invoker 具有最小的活跃数，此时直接返回该 Invoker 即可</li>
<li>如果有多个 Invoker 具有最小活跃数，且它们的权重不相等，此时处理方式和 RandomLoadBalance 一致</li>
<li>如果有多个 Invoker 具有最小活跃数，但它们的权重相等，此时随机返回一个即可</li>
</ol>
<h3 id="ConsistentHashLoadBalance"><a href="#ConsistentHashLoadBalance" class="headerlink" title="ConsistentHashLoadBalance"></a>ConsistentHashLoadBalance</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsistentHashLoadBalance</span> <span class="keyword">extends</span> <span class="title">AbstractLoadBalance</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ConcurrentMap&lt;String, ConsistentHashSelector&lt;?&gt;&gt; selectors = </div><div class="line">        <span class="keyword">new</span> ConcurrentHashMap&lt;String, ConsistentHashSelector&lt;?&gt;&gt;();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> &lt;T&gt; <span class="function">Invoker&lt;T&gt; <span class="title">doSelect</span><span class="params">(List&lt;Invoker&lt;T&gt;&gt; invokers, URL url, Invocation invocation)</span> </span>&#123;</div><div class="line">        String methodName = RpcUtils.getMethodName(invocation);</div><div class="line">        String key = invokers.get(<span class="number">0</span>).getUrl().getServiceKey() + <span class="string">"."</span> + methodName;</div><div class="line"></div><div class="line">        <span class="comment">// 获取 invokers 原始的 hashcode</span></div><div class="line">        <span class="keyword">int</span> identityHashCode = System.identityHashCode(invokers);</div><div class="line">        ConsistentHashSelector&lt;T&gt; selector = (ConsistentHashSelector&lt;T&gt;) selectors.get(key);</div><div class="line">        <span class="comment">// 如果 invokers 是一个新的 List 对象，意味着服务提供者数量发生了变化，可能新增也可能减少了。</span></div><div class="line">        <span class="comment">// 此时 selector.identityHashCode != identityHashCode 条件成立</span></div><div class="line">        <span class="keyword">if</span> (selector == <span class="keyword">null</span> || selector.identityHashCode != identityHashCode) &#123;</div><div class="line">            <span class="comment">// 创建新的 ConsistentHashSelector</span></div><div class="line">            selectors.put(key, <span class="keyword">new</span> ConsistentHashSelector&lt;T&gt;(invokers, methodName, identityHashCode));</div><div class="line">            selector = (ConsistentHashSelector&lt;T&gt;) selectors.get(key);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 调用 ConsistentHashSelector 的 select 方法选择 Invoker</span></div><div class="line">        <span class="keyword">return</span> selector.select(invocation);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsistentHashSelector</span>&lt;<span class="title">T</span>&gt; </span>&#123;...&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="RoundRobinLoadBalance"><a href="#RoundRobinLoadBalance" class="headerlink" title="RoundRobinLoadBalance"></a>RoundRobinLoadBalance</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoundRobinLoadBalance</span> <span class="keyword">extends</span> <span class="title">AbstractLoadBalance</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String NAME = <span class="string">"roundrobin"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ConcurrentMap&lt;String, AtomicPositiveInteger&gt; sequences = </div><div class="line">        <span class="keyword">new</span> ConcurrentHashMap&lt;String, AtomicPositiveInteger&gt;();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> &lt;T&gt; <span class="function">Invoker&lt;T&gt; <span class="title">doSelect</span><span class="params">(List&lt;Invoker&lt;T&gt;&gt; invokers, URL url, Invocation invocation)</span> </span>&#123;</div><div class="line">        <span class="comment">// key = 全限定类名 + "." + 方法名，比如 com.xxx.DemoService.sayHello</span></div><div class="line">        String key = invokers.get(<span class="number">0</span>).getUrl().getServiceKey() + <span class="string">"."</span> + invocation.getMethodName();</div><div class="line">        <span class="keyword">int</span> length = invokers.size();</div><div class="line">        <span class="comment">// 最大权重</span></div><div class="line">        <span class="keyword">int</span> maxWeight = <span class="number">0</span>;</div><div class="line">        <span class="comment">// 最小权重</span></div><div class="line">        <span class="keyword">int</span> minWeight = Integer.MAX_VALUE;</div><div class="line">        <span class="keyword">final</span> LinkedHashMap&lt;Invoker&lt;T&gt;, IntegerWrapper&gt; invokerToWeightMap = <span class="keyword">new</span> LinkedHashMap&lt;Invoker&lt;T&gt;, IntegerWrapper&gt;();</div><div class="line">        <span class="comment">// 权重总和</span></div><div class="line">        <span class="keyword">int</span> weightSum = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 下面这个循环主要用于查找最大和最小权重，计算权重总和等</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</div><div class="line">            <span class="keyword">int</span> weight = getWeight(invokers.get(i), invocation);</div><div class="line">            <span class="comment">// 获取最大和最小权重</span></div><div class="line">            maxWeight = Math.max(maxWeight, weight);</div><div class="line">            minWeight = Math.min(minWeight, weight);</div><div class="line">            <span class="keyword">if</span> (weight &gt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="comment">// 将 weight 封装到 IntegerWrapper 中</span></div><div class="line">                invokerToWeightMap.put(invokers.get(i), <span class="keyword">new</span> IntegerWrapper(weight));</div><div class="line">                <span class="comment">// 累加权重</span></div><div class="line">                weightSum += weight;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 查找 key 对应的对应 AtomicPositiveInteger 实例，为空则创建。</span></div><div class="line">        <span class="comment">// 这里可以把 AtomicPositiveInteger 看成一个黑盒，大家只要知道</span></div><div class="line">        <span class="comment">// AtomicPositiveInteger 用于记录服务的调用编号即可。至于细节，</span></div><div class="line">        <span class="comment">// 大家如果感兴趣，可以自行分析</span></div><div class="line">        AtomicPositiveInteger sequence = sequences.get(key);</div><div class="line">        <span class="keyword">if</span> (sequence == <span class="keyword">null</span>) &#123;</div><div class="line">            sequences.putIfAbsent(key, <span class="keyword">new</span> AtomicPositiveInteger());</div><div class="line">            sequence = sequences.get(key);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 获取当前的调用编号</span></div><div class="line">        <span class="keyword">int</span> currentSequence = sequence.getAndIncrement();</div><div class="line">        <span class="comment">// 如果最小权重小于最大权重，表明服务提供者之间的权重是不相等的</span></div><div class="line">        <span class="keyword">if</span> (maxWeight &gt; <span class="number">0</span> &amp;&amp; minWeight &lt; maxWeight) &#123;</div><div class="line">            <span class="comment">// 使用调用编号对权重总和进行取余操作</span></div><div class="line">            <span class="keyword">int</span> mod = currentSequence % weightSum;</div><div class="line">            <span class="comment">// 进行 maxWeight 次遍历</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxWeight; i++) &#123;</div><div class="line">                <span class="comment">// 遍历 invokerToWeightMap</span></div><div class="line">                <span class="keyword">for</span> (Map.Entry&lt;Invoker&lt;T&gt;, IntegerWrapper&gt; each : invokerToWeightMap.entrySet()) &#123;</div><div class="line">					<span class="comment">// 获取 Invoker</span></div><div class="line">                    <span class="keyword">final</span> Invoker&lt;T&gt; k = each.getKey();</div><div class="line">                    <span class="comment">// 获取权重包装类 IntegerWrapper</span></div><div class="line">                    <span class="keyword">final</span> IntegerWrapper v = each.getValue();</div><div class="line">                    </div><div class="line">                    <span class="comment">// 如果 mod = 0，且权重大于0，此时返回相应的 Invoker</span></div><div class="line">                    <span class="keyword">if</span> (mod == <span class="number">0</span> &amp;&amp; v.getValue() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">return</span> k;</div><div class="line">                    &#125;</div><div class="line">                    </div><div class="line">                    <span class="comment">// mod != 0，且权重大于0，此时对权重和 mod 分别进行自减操作</span></div><div class="line">                    <span class="keyword">if</span> (v.getValue() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        v.decrement();</div><div class="line">                        mod--;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 服务提供者之间的权重相等，此时通过轮询选择 Invoker</span></div><div class="line">        <span class="keyword">return</span> invokers.get(currentSequence % length);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// IntegerWrapper 是一个 int 包装类，主要包含了一个自减方法。</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerWrapper</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> value;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decrement</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.value--;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// 省略部分代码</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/dubbo/">dubbo</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dubbo/">dubbo</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Docker搭建zookeeper集群" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/05/28/Docker搭建zookeeper集群/" class="article-date">
      <time datetime="2020-05-28T12:10:32.000Z" itemprop="datePublished">2020-05-28</time>
</a>

 
    <a href="/2020/05/28/Docker搭建zookeeper集群/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="2020/05/28/Docker搭建zookeeper集群/" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/Docker搭建zookeeper集群/">Docker搭建zookeeper集群</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Docker搭建zookeeper集群"><a href="#Docker搭建zookeeper集群" class="headerlink" title="Docker搭建zookeeper集群"></a>Docker搭建zookeeper集群</h2><p>准备在3台虚拟机上搭建zookeeper集群</p>
<h4 id="创建挂载目录"><a href="#创建挂载目录" class="headerlink" title="创建挂载目录"></a>创建挂载目录</h4><p>用于存储配置文件和数据，使用docker数据和配置文件等需要放在自己的宿主机，而不是容器内，特别是数据</p>
<p><code>mkdir -p zookeeper/conf</code></p>
<p><code>mkdir -p zookeeper/data</code></p>
<h4 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h4><p>在zookeeper/data下创建zoo.cfg</p>
<p>touch <code>zoo.cfg</code></p>
<p>clientPort=2181<br>dataDir=/data<br>dataLogDir=/data/log<br>tickTime=2000<br>initLimit=5<br>syncLimit=2<br>autopurge.snapRetainCount=3<br>autopurge.purgeInterval=0<br>maxClientCnxns=60<br>server.111=10.255.200.168:2888:3888<br>server.222=10.255.200.174:2888:3888<br>server.233=10.255.200.172:2888:3888</p>
<h4 id="配置myid"><a href="#配置myid" class="headerlink" title="配置myid"></a>配置myid</h4><p>在zookeeper/data目录下创建<strong>myid</strong>，并配置id，里面的<strong>id一定要和上面配置的server.id一致</strong></p>
<p><code>touch myid</code></p>
<p><code>echo 111 &gt; myid</code></p>
<h4 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h4><p>docker run  –network host -v /usr/local/zookeeper/data:/data -v  /usr/local/zookeeper/conf:/conf –name zookeeper-2181 -d zookeeper:3.4.13</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/docker/">docker</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zookeeper/">zookeeper</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2020 markee

            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
                <a href="http://www.miitbeian.gov.cn/">京ICP备16056982号-1</a>
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


    
        <script>
            if ($(".left-col").is(":visible")) {
                var duoshuoQuery = {short_name:"idea4j"};
                (function() {
                    var d = document, s = d.createElement('script');
                    s.src = 'http://static.duoshuo.com/embed.js';
                    s.async = true; s.charset = 'UTF-8';
                    (d.head || d.body).appendChild(s);
                })();

                $(document).ready(function(){
                    var $duoshuoCount = $(".ds-thread-count");
                    $duoshuoCount.bind("DOMNodeInserted", function(e) {
                        var num = $(this).text().replace(/[^0-9]/ig,"");
                        $(this).siblings(".count-comment").text(num);
                        $(this).remove();
                    })
                })
            }
        </script>
    

     




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
             categories: ".article-category a, a.tag-list-link", 
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>